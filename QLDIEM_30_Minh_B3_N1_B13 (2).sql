USE MASTER
go

--kiểm tra database đã tồn tại chưa
if exists(select name from SYS.databases where name = 'QLDIEM_30_MINH')
drop database QLDIEM_30_MINH
go
-- 1 tạo csdl tên QLDIEM_30_MINH
create database QLDIEM_30_MINH
ON(NAME='QLDIEM_30_MINH_DATA', FILENAME = 'E:\QLDIEM_30_MINH.MDF')
LOG ON(NAME = 'QLDIEM_30_MINH', FILENAME = 'E:\QLDIEM_30_MINH.LDF')
GO

USE QLDIEM_30_MINH
GO

--SỬA TIN HỌC THÀNH CNTT

--TẠO BẢNG KHOA
CREATE TABLE KHOA_30_MINH
(
	MAKHOA_30_MINH CHAR(2) PRIMARY KEY NOT NULL,
	TENKHOA_30_MINH NVARCHAR(30)
)

CREATE TABLE MONHOC_30_MINH
(
	MAMH_30_MINH CHAR(2) PRIMARY KEY NOT NULL,
	TENMH_30_MINH NVARCHAR(30),
	SOTIET_30_MINH TINYINT
)

CREATE TABLE SINHVIEN_30_MINH
(
	MASV_30_MINH CHAR (3) PRIMARY KEY NOT NULL,
	HOSV_30_MINH NVARCHAR(30),
	TENSV_30_MINH NVARCHAR(30),
	PHAI_30_MINH NVARCHAR(3),
	NS_30_MINH DATE,
	NOISINH_30_MINH NVARCHAR(25),
	MAKH_30_MINH CHAR(2) references KHOA_30_MINH(MAKHOA_30_MINH) NOT NULL,
	HB_30_MINH FLOAT
)

CREATE TABLE KQ_30_MINH
(
	MASV CHAR(3) references SINHVIEN_30_MINH(MASV_30_MINH) NOT NULL,
	MAMH CHAR(2) references MONHOC_30_MINH(MAMH_30_MINH) NOT NULL,
	LANTHI TINYINT NOT NULL,
	PRIMARY KEY(MASV,MAMH,LANTHI),
	DIEM DECIMAL(4,2)
)
--NHẬP DỮ LIỆU CHO BẢNG KHOA
INSERT KHOA_30_MINH VALUES('AV', N' ANH VĂN ')
INSERT KHOA_30_MINH VALUES('TH', N' Tin Học')
INSERT KHOA_30_MINH VALUES('TR', N' Triết ')
INSERT KHOA_30_MINH VALUES('VL', N' Vật Lý ')

--NHẬP DỮ LIỆU CHO BẢNG MÔN HỌC
INSERT MONHOC_30_MINH VALUES('01', N'Cơ sở dữ liệu', '45')
INSERT MONHOC_30_MINH VALUES('02', N'Trí tuệ nhân tạo', '45')
INSERT MONHOC_30_MINH VALUES('03', N' Truyền tin', '45')
INSERT MONHOC_30_MINH VALUES('04', N' Đồ họa', '60')
INSERT MONHOC_30_MINH VALUES('05', N' Văn phạm', '45')
INSERT MONHOC_30_MINH VALUES('06', N'Kỹ thuật lập trình', '45')

--NHẬP DỮ LIỆU CHO BẢNG SINH VIÊN
INSERT SINHVIEN_30_MINH VALUES('A01',N'Nguyễn thị',N'Hải',N'Nữ','1993-02-23',N'Hà Nội','TH','130000')
INSERT SINHVIEN_30_MINH VALUES('A02',N'Trần văn',N'Chính','Nam','1992-12-24',N'Bình Định','VL','150000')
INSERT SINHVIEN_30_MINH VALUES('A03',N'Lê thu bạch',N'Yến',N'Nữ','1993-02-21',N'TPHCM','TH','170000')
INSERT SINHVIEN_30_MINH VALUES('A04',N'Trần anh',N'Tuấn','Nam','1994-12-20',N'Hà Nội','AV','80000')
INSERT SINHVIEN_30_MINH VALUES('B01',N'Trần thanh',N'Mai',N'Nữ','1993-08-12',N'Hải Phòng','TR','0')
INSERT SINHVIEN_30_MINH VALUES('B02',N'Trần thị thu',N'Thủy',N'Nữ','1994-01-02',N'TPHCM','AV','0')

--NHẬP DỮ LIỆU CHO BẢNG KQ
INSERT KQ_30_MINH VALUES('A01','01',1,3)
INSERT KQ_30_MINH VALUES('A01','01',2,6)
INSERT KQ_30_MINH VALUES('A01','02',2,6)
INSERT KQ_30_MINH VALUES('A01','03',1,5)
INSERT KQ_30_MINH VALUES('A02','01',1,4.5)
INSERT KQ_30_MINH VALUES('A02','01',2,7)
INSERT KQ_30_MINH VALUES('A02','03',1,10)
INSERT KQ_30_MINH VALUES('A02','05',1,9)
INSERT KQ_30_MINH VALUES('A03','01',1,2)
INSERT KQ_30_MINH VALUES('A03','01',2,5)
INSERT KQ_30_MINH VALUES('A03','03',1,2.5)
INSERT KQ_30_MINH VALUES('A03','03',2,4)
INSERT KQ_30_MINH VALUES('A04','05',2,10)
INSERT KQ_30_MINH VALUES('B01','01',1,7)
INSERT KQ_30_MINH VALUES('B01','03',1,2.5)
INSERT KQ_30_MINH VALUES('B01','03',2,5)
INSERT KQ_30_MINH VALUES('B02','02',1,6)
INSERT KQ_30_MINH VALUES('B02','04',1,10)





